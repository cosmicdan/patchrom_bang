*** PasswordUnlockScreen.smali	2014-10-11 10:21:00.500209272 +1100
--- PasswordUnlockScreen.smali	2014-10-11 10:17:59.368205343 +1100
***************
*** 5,10 ****
  # interfaces
  .implements Lcom/android/internal/policy/impl/KeyguardScreen;
  .implements Landroid/widget/TextView$OnEditorActionListener;
  
  
  # static fields
--- 5,20 ----
  # interfaces
  .implements Lcom/android/internal/policy/impl/KeyguardScreen;
  .implements Landroid/widget/TextView$OnEditorActionListener;
+ .implements Landroid/view/View$OnKeyListener;
+ 
+ 
+ # annotations
+ .annotation system Ldalvik/annotation/MemberClasses;
+     value = {
+         Lcom/android/internal/policy/impl/PasswordUnlockScreen$MiuiPasswordEntryTextWatcher;,
+         Lcom/android/internal/policy/impl/PasswordUnlockScreen$Injector;
+     }
+ .end annotation
  
  
  # static fields
***************
*** 839,850 ****
      return-void
  .end method
  
! .method public needsInput()Z
      .locals 1
  
      .prologue
      iget-boolean v0, p0, Lcom/android/internal/policy/impl/PasswordUnlockScreen;->mIsAlpha:Z
  
      return v0
  .end method
  
--- 911,976 ----
      return-void
  .end method
  
! .method getKeyboardView()Lcom/android/internal/widget/PasswordEntryKeyboardView;
!     .locals 1
! 
!     .prologue
!     iget-object v0, p0, Lcom/android/internal/policy/impl/PasswordUnlockScreen;->mKeyboardView:Lcom/android/internal/widget/PasswordEntryKeyboardView;
! 
!     return-object v0
! .end method
! 
! .method getLockPatternUtils()Lcom/android/internal/widget/LockPatternUtils;
!     .locals 1
! 
!     .prologue
!     iget-object v0, p0, Lcom/android/internal/policy/impl/PasswordUnlockScreen;->mLockPatternUtils:Lcom/android/internal/widget/LockPatternUtils;
! 
!     return-object v0
! .end method
! 
! .method public isAlphaOrDefaultImeIsCustomizedForMiui()Z
      .locals 1
  
      .prologue
      iget-boolean v0, p0, Lcom/android/internal/policy/impl/PasswordUnlockScreen;->mIsAlpha:Z
  
+     if-nez v0, :cond_0
+ 
+     invoke-virtual {p0}, Lcom/android/internal/policy/impl/PasswordUnlockScreen;->getContext()Landroid/content/Context;
+ 
+     move-result-object v0
+ 
+     invoke-virtual {v0}, Landroid/content/Context;->getContentResolver()Landroid/content/ContentResolver;
+ 
+     move-result-object v0
+ 
+     invoke-static {v0}, Lmiui/view/inputmethod/CustomizedImeForMiui;->defaultImeIsCustomizedForMiui(Landroid/content/ContentResolver;)Z
+ 
+     move-result v0
+ 
+     if-eqz v0, :cond_1
+ 
+     :cond_0
+     const/4 v0, 0x1
+ 
+     :goto_0
+     return v0
+ 
+     :cond_1
+     const/4 v0, 0x0
+ 
+     goto :goto_0
+ .end method
+ 
+ .method public needsInput()Z
+     .locals 1
+ 
+     .prologue
+     invoke-virtual {p0}, Lcom/android/internal/policy/impl/PasswordUnlockScreen;->isAlphaOrDefaultImeIsCustomizedForMiui()Z
+ 
+     move-result v0
+ 
      return v0
  .end method
  
