*** ContentResolver.smali	2014-10-11 10:20:31.596208645 +1100
--- ContentResolver.smali	2014-10-11 10:17:27.408204650 +1100
***************
*** 3874,3880 ****
  .end method
  
  .method public final query(Landroid/net/Uri;[Ljava/lang/String;Ljava/lang/String;[Ljava/lang/String;Ljava/lang/String;Landroid/os/CancellationSignal;)Landroid/database/Cursor;
!     .locals 24
      .parameter "uri"
      .parameter "projection"
      .parameter "selection"
--- 3883,3889 ----
  .end method
  
  .method public final query(Landroid/net/Uri;[Ljava/lang/String;Ljava/lang/String;[Ljava/lang/String;Ljava/lang/String;Landroid/os/CancellationSignal;)Landroid/database/Cursor;
!     .locals 31
      .parameter "uri"
      .parameter "projection"
      .parameter "selection"
***************
*** 4148,4153 ****
      goto/16 :goto_0
  
      .end local v18           #e:Landroid/os/RemoteException;
      :catchall_0
      move-exception v4
  
--- 4162,4210 ----
      goto/16 :goto_0
  
      .end local v18           #e:Landroid/os/RemoteException;
+     :catch_miui_0
+     move-exception v25
+ 
+     .local v25, e:Ljava/lang/IllegalStateException;
+     :try_start_miui_0
+     move-object/from16 v0, p0
+ 
+     iget-object v0, v0, Landroid/content/ContentResolver;->mContext:Landroid/content/Context;
+ 
+     move-object/from16 v24, v0
+ 
+     move-object/from16 v26, p1
+ 
+     move-object/from16 v27, p2
+ 
+     move-object/from16 v28, p3
+ 
+     move-object/from16 v29, p4
+ 
+     move-object/from16 v30, p5
+ 
+     invoke-static/range {v24 .. v30}, Landroid/content/ContentResolver$Injector;->checkCursorLeakException(Landroid/content/Context;Ljava/lang/IllegalStateException;Landroid/net/Uri;[Ljava/lang/String;Ljava/lang/String;[Ljava/lang/String;Ljava/lang/String;)Landroid/database/Cursor;
+     :try_end_miui_0
+     .catchall {:try_start_miui_0 .. :try_end_miui_0} :catchall_0
+ 
+     move-result-object v23
+ 
+     if-eqz v3, :cond_miui_0
+ 
+     move-object/from16 v0, p0
+ 
+     invoke-virtual {v0, v3}, Landroid/content/ContentResolver;->releaseUnstableProvider(Landroid/content/IContentProvider;)Z
+ 
+     :cond_miui_0
+     if-eqz v10, :cond_0
+ 
+     move-object/from16 v0, p0
+ 
+     invoke-virtual {v0, v10}, Landroid/content/ContentResolver;->releaseProvider(Landroid/content/IContentProvider;)Z
+ 
+     goto/16 :goto_0
+ 
+     .end local v25           #e:Ljava/lang/IllegalStateException;
      :catchall_0
      move-exception v4
  
