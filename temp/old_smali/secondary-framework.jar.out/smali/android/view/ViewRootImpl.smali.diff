*** ./smali/android/view/ViewRootImpl.smali	2014-10-11 10:21:13.740209559 +1100
--- /home/cosmicdan/patchrom_mtk/bang/temp/new_smali/secondary-framework.jar.out/./smali/android/view/ViewRootImpl.smali	2014-10-11 10:18:12.172205621 +1100
***************
*** 26,32 ****
          Landroid/view/ViewRootImpl$TraversalRunnable;,
          Landroid/view/ViewRootImpl$QueuedInputEvent;,
          Landroid/view/ViewRootImpl$ViewRootHandler;,
!         Landroid/view/ViewRootImpl$SystemUiVisibilityInfo;
      }
  .end annotation
  
--- 26,33 ----
          Landroid/view/ViewRootImpl$TraversalRunnable;,
          Landroid/view/ViewRootImpl$QueuedInputEvent;,
          Landroid/view/ViewRootImpl$ViewRootHandler;,
!         Landroid/view/ViewRootImpl$SystemUiVisibilityInfo;,
!         Landroid/view/ViewRootImpl$Injector;
      }
  .end annotation
  
***************
*** 475,480 ****
--- 476,483 ----
  
  .field mSeq:I
  
+ .field mSkipResizedMsg:Z
+ 
  .field private mSoftInputMayChanged:Z
  
  .field mSoftInputMode:I
***************
*** 673,678 ****
--- 676,683 ----
  
      invoke-direct {p0}, Ljava/lang/Object;-><init>()V
  
+     iput-boolean v4, p0, Landroid/view/ViewRootImpl;->mSkipResizedMsg:Z
+ 
      const-wide/16 v2, 0x0
  
      iput-wide v2, p0, Landroid/view/ViewRootImpl;->mLastTrackballTime:J
***************
*** 7166,7171 ****
--- 7171,7188 ----
      goto :goto_0
  .end method
  
+ .method public static getWindowSession(Landroid/os/Looper;)Landroid/view/IWindowSession;
+     .locals 1
+     .parameter "mainLooper"
+ 
+     .prologue
+     invoke-static {p0}, Landroid/view/WindowManagerGlobal;->getWindowSession(Landroid/os/Looper;)Landroid/view/IWindowSession;
+ 
+     move-result-object v0
+ 
+     return-object v0
+ .end method
+ 
  .method private handleDragEvent(Landroid/view/DragEvent;)V
      .locals 9
      .parameter "event"
***************
*** 16145,16150 ****
--- 16162,16185 ----
      return-void
  .end method
  
+ .method createInputChannelAnyWay()V
+     .locals 1
+ 
+     .prologue
+     iget-object v0, p0, Landroid/view/ViewRootImpl;->mInputChannel:Landroid/view/InputChannel;
+ 
+     if-nez v0, :cond_0
+ 
+     new-instance v0, Landroid/view/InputChannel;
+ 
+     invoke-direct {v0}, Landroid/view/InputChannel;-><init>()V
+ 
+     iput-object v0, p0, Landroid/view/ViewRootImpl;->mInputChannel:Landroid/view/InputChannel;
+ 
+     :cond_0
+     return-void
+ .end method
+ 
  .method public debug()V
      .locals 1
  
***************
*** 16640,16645 ****
--- 16675,16700 ----
      goto :goto_1
  .end method
  
+ .method discardInputChannelBySetting()V
+     .locals 1
+ 
+     .prologue
+     iget-object v0, p0, Landroid/view/ViewRootImpl;->mWindowAttributes:Landroid/view/WindowManager$LayoutParams;
+ 
+     iget v0, v0, Landroid/view/WindowManager$LayoutParams;->inputFeatures:I
+ 
+     and-int/lit8 v0, v0, 0x2
+ 
+     if-eqz v0, :cond_0
+ 
+     const/4 v0, 0x0
+ 
+     iput-object v0, p0, Landroid/view/ViewRootImpl;->mInputChannel:Landroid/view/InputChannel;
+ 
+     :cond_0
+     return-void
+ .end method
+ 
  .method public dispatchAppVisibility(Z)V
      .locals 3
      .parameter "visible"
***************
*** 22660,22669 ****
      invoke-direct {v1}, Landroid/view/InputChannel;-><init>()V
  
      iput-object v1, p0, Landroid/view/ViewRootImpl;->mInputChannel:Landroid/view/InputChannel;
      :try_end_0
      .catchall {:try_start_0 .. :try_end_0} :catchall_0
  
-     :cond_7
      :try_start_1
      iget-object v1, p0, Landroid/view/ViewRootImpl;->mWindowAttributes:Landroid/view/WindowManager$LayoutParams;
  
--- 22715,22726 ----
      invoke-direct {v1}, Landroid/view/InputChannel;-><init>()V
  
      iput-object v1, p0, Landroid/view/ViewRootImpl;->mInputChannel:Landroid/view/InputChannel;
+ 
+     :cond_7
+     invoke-virtual {p0}, Landroid/view/ViewRootImpl;->createInputChannelAnyWay()V
      :try_end_0
      .catchall {:try_start_0 .. :try_end_0} :catchall_0
  
      :try_start_1
      iget-object v1, p0, Landroid/view/ViewRootImpl;->mWindowAttributes:Landroid/view/WindowManager$LayoutParams;
  
***************
*** 23236,23241 ****
--- 23293,23300 ----
      iput-object v1, p0, Landroid/view/ViewRootImpl;->mInputQueueCallback:Landroid/view/InputQueue$Callback;
  
      :cond_f
+     invoke-virtual {p0}, Landroid/view/ViewRootImpl;->discardInputChannelBySetting()V
+ 
      iget-object v1, p0, Landroid/view/ViewRootImpl;->mInputChannel:Landroid/view/InputChannel;
  
      if-eqz v1, :cond_10
***************
*** 23366,23371 ****
--- 23425,23441 ----
      return v0
  .end method
  
+ .method public skipNextResizedMsg()V
+     .locals 1
+ 
+     .prologue
+     const/4 v0, 0x1
+ 
+     iput-boolean v0, p0, Landroid/view/ViewRootImpl;->mSkipResizedMsg:Z
+ 
+     return-void
+ .end method
+ 
  .method public startActionModeForChild(Landroid/view/View;Landroid/view/ActionMode$Callback;)Landroid/view/ActionMode;
      .locals 1
      .parameter "originalView"
