*** ./smali/com/android/server/wm/WindowState.smali	2014-10-11 10:21:21.964209738 +1100
--- /home/cosmicdan/patchrom_mtk/bang/temp/new_smali/services.jar.out/./smali/com/android/server/wm/WindowState.smali	2014-10-11 10:18:20.920205811 +1100
***************
*** 40,45 ****
--- 40,47 ----
  
  .field final mAttachedWindow:Lcom/android/server/wm/WindowState;
  
+ .field mAttrFlagsSaved:Z
+ 
  .field final mAttrs:Landroid/view/WindowManager$LayoutParams;
  
  .field final mBaseLayer:I
***************
*** 78,83 ****
--- 80,87 ----
  
  .field mExiting:Z
  
+ .field final mFloatingWindowAllowed:Z
+ 
  .field final mFrame:Landroid/graphics/Rect;
  
  .field final mGivenContentInsets:Landroid/graphics/Rect;
***************
*** 98,103 ****
--- 102,109 ----
  
  .field mInputChannel:Landroid/view/InputChannel;
  
+ .field mInputChannelSaved:Landroid/view/InputChannel;
+ 
  .field final mInputWindowHandle:Lcom/android/server/input/InputWindowHandle;
  
  .field mInvGlobalScale:F
***************
*** 824,829 ****
--- 830,839 ----
  
      iput-object v6, p0, Lcom/android/server/wm/WindowState;->mWinAnimator:Lcom/android/server/wm/WindowStateAnimator;
  
+     const/4 v6, 0x0
+ 
+     iput-boolean v6, p0, Lcom/android/server/wm/WindowState;->mFloatingWindowAllowed:Z
+ 
      .end local v4           #e:Landroid/os/RemoteException;
      :goto_7
      return-void
***************
*** 1039,1044 ****
--- 1049,1064 ----
  
      iput-object v7, p0, Lcom/android/server/wm/WindowState;->mInputWindowHandle:Lcom/android/server/input/InputWindowHandle;
  
+     iget-object v6, p0, Lcom/android/server/wm/WindowState;->mSession:Lcom/android/server/wm/Session;
+ 
+     iget v6, v6, Lcom/android/server/wm/Session;->mUid:I
+ 
+     invoke-static {v6}, Lcom/android/server/wm/WindowManagerService$Injector;->isFloatingWindowAllowed(I)Z
+ 
+     move-result v6
+ 
+     iput-boolean v6, p0, Lcom/android/server/wm/WindowState;->mFloatingWindowAllowed:Z
+ 
      goto/16 :goto_7
  
      .restart local v5       #parent:Lcom/android/server/wm/WindowToken;
